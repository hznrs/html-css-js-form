<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>GÃ¶rev SeÃ§imi</title>
  <style>
    table { border-collapse: collapse; width: 100%; text-align: center; }
    th, td { border: 1px solid black; padding: 0; }
    th { background-color: #d0e0ff; padding: 8px; }
    img { width: 100%; height: auto; display: block; }
    label { display: block; width: 100%; height: 100%; }
    button {
      background-color: #0088cc; color: white; padding: 10px 20px; border: none; border-radius: 8px;
      font-size: 16px; cursor: pointer; box-shadow: 2px 2px 6px rgba(0,0,0,0.2); transition: background-color 0.3s ease; margin-top: 20px;
    }
    button:hover { background-color: #006699; }
  </style>
</head>
<body>

<h2>GÃ–REV PAYLAÅžIMI</h2>

<form id="gorevForm">
  <table>
    <tr>
      <th>GÃ¶revler âž¡ âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ ZorlukDÃ¼zeyi â¬‡</th>
      <th>1. GÃ¶rev</th><th>2. GÃ¶rev</th><th>3. GÃ¶rev</th><th>4. GÃ¶rev</th><th>5. GÃ¶rev</th>
      <th>6. GÃ¶rev</th><th>7. GÃ¶rev</th><th>8. GÃ¶rev</th><th>9. GÃ¶rev</th><th>10. GÃ¶rev</th>
    </tr>

    <!-- A DÃ¼zeyi -->
    <tr>
      <td>A DÃ¼zeyi</td>
      <td><label><input type="radio" name="gorev1" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev2" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev3" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev4" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev5" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev6" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev7" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev8" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev9" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev10" value="Kolay"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
    </tr>

    <!-- B DÃ¼zeyi -->
    <tr>
      <td>B DÃ¼zeyi</td>
      <td><label><input type="radio" name="gorev1" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev2" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev3" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev4" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev5" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev6" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev7" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev8" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev9" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev10" value="Orta"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
    </tr>

    <!-- C DÃ¼zeyi -->
    <tr>
      <td>C DÃ¼zeyi</td>
      <td><label><input type="radio" name="gorev1" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev2" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev3" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev4" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev5" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev6" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev7" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev8" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev9" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
      <td><label><input type="radio" name="gorev10" value="Zor"><img src="ca68123b-00b5-4554-af5b-dda7af85be19.png" alt="10 TL"></label></td>
    </tr>
  </table>

  <button type="submit">GÃ¶nder</button>
</form>

<script>
  const GAS_URL = "https://script.google.com/kendi_urlen/exec"; // <-- KENDÄ° LÄ°NKÄ°N

  function getSessionId() {
    const m = location.search.match(/[?&]sid=([^&]+)/);
    if (m && m[1]) return decodeURIComponent(m[1]);
    try {
      const ls = localStorage.getItem('sessionId');
      if (ls) return ls;
    } catch (e) {}
    return String(Date.now()) + Math.random();
  }

  document.getElementById("gorevForm").addEventListener("submit", async function (event) {
    event.preventDefault();

    const answers = [];
    for (let i = 1; i <= 10; i++) {
      const sel = document.querySelector(`input[name="gorev${i}"]:checked`);
      answers.push({ scene: i, answer: sel ? sel.value : "" });
    }

    const payload = {
      sessionId: getSessionId(), // ðŸ”‘ artÄ±k hep aynÄ± id
      userAgent: navigator.userAgent,
      level: (localStorage.getItem('tangram_done_level') || localStorage.getItem('selectedTangram') || null),
      answers: answers
    };

    console.log("GÃ¶nderilecek veri:", payload);

    try {
      await fetch(GAS_URL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "text/plain" },
        body: JSON.stringify(payload)
      });
      alert("GÃ¶nderildi! (Sheetsâ€™i kontrol et)");
    } catch (err) {
      console.error(err);
      alert("GÃ¶nderimde hata oluÅŸtu!");
    }
  });
</script>

</body>
</html>
